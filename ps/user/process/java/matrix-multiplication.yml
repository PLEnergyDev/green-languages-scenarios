name: matrix-multiplication
language: java
code: |
    public class Program {
        public static void main(String[] args) throws Throwable {
            int n = Integer.parseInt(args[0]);
            int repetitions = (args.length > 1) ? Integer.parseInt(args[1]) : 1000;

            double[] A = new double[n * n];
            double[] B = new double[n * n];
            double[] C = new double[n * n];

            for (int i = 0; i < n; i++) {
                for (int j = 0; j < n; j++) {
                    A[i*n + j] = B[i*n + j] = i + j;
                }
            }

            double totalResult = 0.0;
            for (int rep = 0; rep < repetitions; rep++) {
                for (int i = 0; i < n; i++) {
                    for (int j = 0; j < n; j++) {
                        double sum = 0.0;
                        for (int k = 0; k < n; k++) {
                            sum += A[i*n + k] * B[k*n + j];
                        }
                        C[i*n + j] = sum;
                    }
                }
                totalResult += C[n*n - 1];
            }

            System.out.printf("%.0f\n", totalResult / repetitions);
        }
    }
arguments: [200, 1000]
compile_options: [-server]
expected_stdout: !!binary MTg0ODcxMDAK
---
name: server
