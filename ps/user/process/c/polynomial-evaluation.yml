name: polynomial-evaluation
language: c
code: |
    #include <stdio.h>
    #include <stdlib.h>

    int main(int argc, char **argv) {
        int degree = atoi(argv[1]);
        double x = atof(argv[2]);
        int repetitions = (argc > 3) ? atoi(argv[3]) : 1000;

        double *coeffs = malloc((degree + 1) * sizeof(double));
        for (int i = 0; i <= degree; i++) {
            coeffs[degree - i] = 1.0 / (i + 1);
        }

        double result = 0.0;
        for (int rep = 0; rep < repetitions; rep++) {
            double eval = 0.0;
            for (int i = 0; i <= degree; i++) {
                eval = coeffs[i] + x * eval;
            }
            result += eval;
        }

        printf("%.6f\n", result / repetitions);
        free(coeffs);
        return 0;
    }
arguments: [1000, 0.5, 1000000]
compile_options: [-pipe, -O3, -march=native, -fomit-frame-pointer]
expected_stdout: !!binary MS4zODYyOTQK
---
name: optimized
