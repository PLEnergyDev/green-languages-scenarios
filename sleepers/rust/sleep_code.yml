name: sleep
language: rust
description: |
    Simple benchmark that sleeps for exactly one second per iteration.
    Used for testing framework measurement accuracy.
code: |
    use std::thread;
    use std::time::Duration;

    #[link(name = "measurements")]
    unsafe extern "C" {
        fn start_measurement() -> bool;
        fn end_measurement();
    }

    fn main() {
        loop {
            unsafe {
                if !start_measurement() {
                    break;
                }
            }
            thread::sleep(Duration::from_secs(1));
            unsafe {
                end_measurement();
            }
        }
    }
compile_options: [--release]
affinity: [4, 5]
---
name: release
measurement_mode: internal
---
name: release
measurement_mode: external
